<!doctype html>
<html ng-app="fatCatsFeeding">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FatCats - Feline Feeding Monitor</title>

  <!-- SCROLLS -->
  <link rel="stylesheet" href="css/bootstrap.min.css"><!-- load bootstrap -->
  <style>
      html                    { overflow-y:scroll; }
      body                    { padding-top:50px; }
      #feeding-list            { margin-bottom:30px; }
      #quantity-input { width: 90px; }
  </style>

  <!-- SPELLS -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><!-- load jquery -->
  <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script><!-- load angular -->
  <script src="js/core.js"></script>
</head>
<body ng-controller="mainController">
    <div class="container">
      <div class="jumbotron text-center">
        <h1>Last fed <span class="label label-info">{{ feedings[0].datetime | elapsed }}</span></h1>
        <h3>Feeding Counter <span class="label label-info">{{ feedings.length }}</span></h3>
      </div>
      <div class="row">
          <div class="col-xs-6">
            <h4 class="pull-left">Feeding Times <br/><small>Last {{quantity}}</h4>
          </div>
          <div class="col-xs-6">
            <div class="form-group form-inline pull-right">
              <button class="btn btn-default " ng-click="quantity = 5">5</button>
              <button class="btn btn-default "  ng-click="quantity = 10">10</button>
              <button class="btn btn-default "  ng-click="quantity = 20">20</button>
              <input type="number" ng-model="quantity" class="form-control" id="quantity-input" placeholder="5">
            </div>
          </div>
      </div>
      <div id="feeding-list" class="row">
        <div class="col-sm-12">
          <table class="table table-striped table-bordered">
            <tr>
              <th>Date Time</th>
              <th>Food Type</th>
              <th>Amount Fed (Per Feline)</th>
            </tr>
            <tr ng-repeat="feeding in feedings | limitTo:quantity">
              <td>
                {{ feeding.datetime | date : "MMMM d, y '@' HH:mm 'CST('Z')''" : 'CST'}}
              </td>
              <td ng-repeat="catfood in catfoods | filter:{_id : feeding.food}">
                {{ catfood.brand + " " + catfood.name + " (" + catfood.kcal + " kcal/cup)"}}
              </td>
              <td ng-repeat="catfood in catfoods | filter:{_id : feeding.food}">
                {{ feeding.amount + " " + catfood.measurement }}
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
</body>
